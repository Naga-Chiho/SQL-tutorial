あるオンラインブックストアのシステムでは、ブラウザの注文画面でユーザーが購入ボタンを押すたびに次のような SQL 文が実行されます。

01 INSERT INTO 受注 (注文番号, 日付, 顧客番号, 商品番号, 注文数)
02 VALUES ('1192296', '2024-04-08', '8828', '0008', 12);
03 UPDATE 在庫 SET 残数 = 残数 - 12
04 WHERE 商品番号 = '0008';

受注テーブルに書き込まれる内容は定期的に出荷管理プログラムが分離レベル READ COMMITTED で監視しており、
新たな受注が入るとすぐに商品が宅配便で出荷されるようになっています。

このとき、以下の設問に答えてください。
1. 正確なデータ処理の観点から、このシステムで懸念されることを2つ挙げてください。
2. その懸念を克服できるよう、SQL文を修正してください

(見直し)
1. 
- 受注テーブルに行を追加した直後に処理が中断すると、在庫が減らないままになってしまう
- 受注テーブルに行を追加した直後に処理が中断しても、出荷管理プログラムによって商品が出荷されてしまう

(見直し)
2. 
BEGIN;
SET TRANSACTION ISOLATION LEVEL READ COMMITTED;
INSERT INTO 受注 (注文番号, 日付, 顧客番号, 商品番号, 注文数)
VALUES ('1192296', '2024-04-08', '8828', '0008', 12);
UPDATE 在庫 SET 残数 = 残数 - 12
WHERE 商品番号 = '0008';
COMMIT;